<div ng-show="mode == 'definition'" ng-controller="operationTypeDefinitionCtrl as opdef">

  <form>

    <div class="row-fluid">
      <div class="span4">
        <label class="label-bold">Operation Name (id: {{current_ot.id}})</label>
        <input type='text' ng-model="current_ot.name" ng-change="change(current_ot)" class="input-xlarge">
      </div>
      <div class="span4">
        <label class="label-bold">Category</label>
        <input type='text' ng-model="current_ot.category" ng-change="change(current_ot)" class="input-xlarge">
      </div>   
      <div class="span1">
        <label class="label-bold">On the fly?</label>
        <input type='checkbox' ng-change="change(current_ot)" ng-model="current_ot.on_the_fly">
      </div>
      <div class="span1">
        <label class="label-bold">Deployed?</label>
        <input type='checkbox' ng-change="change(current_ot)" ng-model="current_ot.deployed">
      </div>

      <div class="span2">

        <button class="btn btn-primary pull-right btn-mini" 
                ng-click="save_ot(current_ot)" 
                ng-disabled="!current_ot.changed"
                style="margin-left: 5px">
          <span ng-if="current_ot.id">Update</span>
          <span ng-if="!current_ot.id">Save</span>
        </button>

        <button ng-if="!current_ot.deployed" 
                class="btn btn-mini pull-right"  style="margin-left: 5px"
                ng-click="delete_ot(current_ot)"><span>Delete</span></button>

        <button class="btn btn-mini pull-right" 
                ng-click="export_ot(current_ot)"><span>Export</span></button>

      </div>

    </div>

    <hr />

    <div ng-if="current_ot.loading_field_types">Loading I/O Definitions ...</div>

    <div class='row-fluid'>
      <div class='span6'>
        <label class="label-bold">
          Inputs
          <a href="#" class="btn btn-mini pull-right" style="margin-left: 5px" ng-click="change(current_ot); add_io('input')">Add Input</a>
          <a href="#" class="btn btn-mini pull-right" ng-click="change(current_ot); add_parameter('input')">Add Paramter</a>
        </label>
        <div ng-include="'io_form'" onLoad="role = 'input'" ng-if="true"></div>
      </div>

      <div class='span6'>
        <label class="label-bold">
          Outputs
          <a href="#" class="btn btn-mini pull-right" ng-click="change(current_ot); add_io('output')">Add Output</a>
        </label>
        <div ng-include="'io_form'" onLoad="role = 'output'" ng-if="true"></div>
        </div>
      </div>

  </form>

  <!-- <pre>{{current_ot|json}}</pre -->

</div>