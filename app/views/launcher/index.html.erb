<% provide(:title, 'Launcher') %>

<div ng-app="aquarium" ng-controller="launcherCtrl as launcher" class='launcher'>

  <%= render partial: 'chooser' %>
  <%= render partial: 'plan_editor' %>  
  <%= render partial: 'operation_editor' %>
  <%= render partial: 'field_value_editor' %>   
  <%= render partial: 'io_editor' %>
  <%= render partial: 'plan_list' %>  
  <%= render partial: 'plan_viewer' %>  
  <%= render partial: '/data_associations/template' %> 

  <md-content flex layout-padding ng-if="status != 'Ready'">
    <div layout="column">
      <h2 class="md-title">{{status}}</h2>
      <md-progress-linear md-mode="indeterminate"></md-progress-linear>
    </div>
  </md-content>

  <section ng-if="status == 'Ready'" layout="row" flex>

    <md-sidenav
      class="md-sidenav-left"
      md-component-id="left"
      md-is-locked-open="true"
      md-whiteframe="1">

      <md-toolbar>

        <div class="md-toolbar-tools">

          <h2 class="md-toolbar-tools">Planner</h2>

          <span flex></span>

          <md-button
            ng-click="$parent.mode = 'running'" 
            ng-class="$parent.mode === 'running' ? 'md-small md-highlight' : 'md-small'">
              List</md-button>

          <md-button
            ng-click="$parent.mode = 'new'" 
            ng-class="$parent.mode === 'new' ? 'md-small md-highlight' : 'md-small'">
              New</md-button>

        </div>

      </md-toolbar>

      <div ng-if="error != null">
        <h4>Error</h4>
        {{error}}
      </div>

      <div ng-if="current_operation" 
           ng-include="'field_value_editor'">
      </div>

    </md-sidenav>

    <md-content flex layout-padding>    

      <div ng-if="status == 'Ready' && mode == 'new'">
        <div ng-if="plan == null" ng-include="'operation_type_chooser'"></div> 
        <div ng-if="plan != null" ng-include="'plan_editor'"></div> 
      </div>

      <div ng-if="status == 'Ready' && mode != 'new'"
           ng-include="'plan_list'">
      </div>      

    </md-content>

  </section>

</div>
