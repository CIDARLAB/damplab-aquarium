<% if current_user && current_user.is_admin %>

  <script type="text/ng-template" id="describe">
    <div style="margin-left: 16px">
      <h4>{{name}}</h4>
      <ul ng-if="tests.its.length > 0">
        <li ng-repeat="it in tests.its">
          <b>{{it.description}}</b>
          <ul>
            <li ng-repeat='result in it.results track by $index'>
              <span ng-if="result == 'failed' || result == 'unimplemented'"
                    style="color: red">{{result}}</span>
              <span ng-if="result != 'failed' && result != 'unimplemented'">{{result}}</span>
            </li>
          </ul>
        </li>
      </ul>
      <div ng-repeat="(name,subtests) in tests" 
           ng-if="name != 'its' && name != 'path'"
           ng-include="'describe'" ng-init="name = name; tests = subtests">
      </div>
    </div>
  </script>

  <!-- SHOULD ASSERTIONS -->
  <script src="/components/should/should.js" type="text/javascript"></script>

  <%= content_for :sidebar do %><% end %>
  <%= content_for :specific_title do %>AQUARIUM UNIT TESTS PAGE<% end %>
  <% content_for :controller do %>testCtrl<% end %>

  <%= content_for :action1 do %>
    <md-button class="md-raised" ng-click="run()">Run</md-button>
  <% end %>

  <%= content_for :main do %>
    <div layout-padding id="aq_test">
      <div ng-include="'describe'" ng-init="name = 'Aquarium Tests'"></div>
    </div>
  <% end %>

<% end %>