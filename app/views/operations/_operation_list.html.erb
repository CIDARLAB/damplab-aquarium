<script type="text/ng-template" id="operation-list">

  <div class='oplist'>

    <table class='table table-condensed oplist'
           ng-show="operations.length > 0">

      <tr>
        <th class='selector'></th>
        <th>Submitted by</th>
        <th>Job</th>
        <th class='output'>Output</th>
        <th>Plan</th>
        <th>Last Update</th>
      </tr>

      <tr ng-repeat="op in operations"
          ng-if="!jobid || op.last_job.id == jobid">

        <td>
          <input type='checkbox' 
                 ng-model='op.selected' 
                 ng-if="!ot.on_the_fly && ( status == 'pending_true' || status == 'scheduled')">
        </td>

        <td>{{op.user.name}}</td>

        <td>
          <a ng-if="op.last_job" href="/jobs/{{op.job_id}}" ng-if>{{op.last_jobs.id}}</a>
          <span ng-if="!op.last_job">-</span>
        </td>

        <td>
          <ul class='input-list'>
            <li ng-repeat="fv in op.field_values | filter: { role: 'output' }">
              {{fv.name}}<span ng-if="fv.child_sample">: {{fv.child_sample.name}}</span>
            </li>
          </ul>              
        </td>

        <td>
          <a ng-repeat="plan in op.plans" href="/launcher?plan_id={{plan.id}}">{{plan.id}}{{$last ? '' : ', '}}</a>
        </td>

        <td>{{op.updated_at|date}}</td>

      </tr>

    </table>

    <h1 ng-if="operations.length == 0" class='md-title'>No operations</h1>

    <h1 ng-if="!operations" class='md-title'>Checking for operations...</h1>

  </div>

</script>